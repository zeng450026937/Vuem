(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["Vuem"]=t():e["Vuem"]=t()})(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var o;function u(e){var t=e||"^2.5.10",n=t.split(".",3).map(function(e){return Number.parseInt(e.replace(/\D/g,""),10)}),r=o.version.split(".",3).map(function(e){return Number.parseInt(e,10)}),i=r[0]===n[0]&&(r[1]>n[1]||r[1]===n[1]&&r[2]>=n[2]);s(i,"Vuem requires Vue version ".concat(t,"."))}function s(e,t){if(!e)throw new Error("[Vuem] ".concat(t))}function c(e,t){if(e&&e.length&&t){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){},f={enumerable:!0,configurable:!0,get:a,set:a};function l(e,t,n){f.get=function(){return this[t][n]},f.set=function(e){this[t][n]=e},Object.defineProperty(e,n,f)}var p=/[^\w.$]/;function h(e){if(p.test(e))return function(){};var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}function d(e){return e instanceof o&&e._isVuem}var b=function(){function e(t){return n(this,e),!o&&"undefined"!==typeof window&&window.Vue&&e.install(window.Vue),s(o,"must call Vue.use(Vuem) before creating a Vuem instance."),u(),m(t)}return i(e,null,[{key:"install",value:function(e){if(!o||e!==o){o=e,u(),o.prototype.$prevent=function(e){this._prevented=Boolean(e)};var t=o.prototype.$emit;o.prototype.$emit=function(){if(this._prevented)return this;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,n)},o.mixin({beforeCreate:function(){n(this)}})}function n(e){var t=e.$options,n=t.model,r=t.parent,i=r?r.$model:null;if(n){if(e.$model="function"===typeof n?n.call(e):d(n)?n:null,!e.$model&&i){var o,u=i.$root;if("string"===typeof n)o=h(n),e.$model=o(u)||u;else{var s=Array.isArray(n),c={};Object.keys(n).forEach(function(e){var t=n[e];o=h(t),c[s?t:e]=o(u)}),e.$model=m({data:c,parent:i})}}}else e.$model=i?i.$root:null}}}]),e}();function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.mixins=e.mixins||[],e.mixins.push({beforeCreate:function(){this._models={},this._actions={},this._subscribe={}},destroyed:function(){this._models=null,this._actions=null,this._subscribe=null},methods:{$register:function(e,t){d(t)&&(t.$parent!==this&&(c(t.$parent,t),t.$parent=this,this.$children.push(t)),t.$root!==this.$root&&(t.$root=this.$root,Object.keys(t._subscribe).forEach(function(e){t.$subscribe(e,t._subscribe[e].raw)})),this._models[e]=t,l(this,"_models",e))},$unregister:function(e){d(e)||(e=this[e]),e&&(e.$parent=null,c(this.$children,e),delete this._models[name])},$dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=[];return this._actions[e]&&i.push(this._actions[e].apply(this,n)),this.$children.forEach(function(t){i.push(t.$dispatch.apply(t,[e].concat(n)))}),Promise.all(i)},$broadcast:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.$root).$emit.apply(t,[e].concat(r)),this},$subscribe:function(e,t){var n=this;this.$unsubscribe(e);var r=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t.apply(n,r)};return r.raw=t,this._subscribe[e]=r,this.$root.$on(e,r),this},$unsubscribe:function(e){var t=this._subscribe[e];return t&&(this.$root.$off(e,t),delete this._subscribe[e]),this}}});var t=new o(e);t._isVuem=!0;var n=e.actions,r=e.models,i=e.subscribe;return n&&(t._actions=n),r&&Object.keys(r).forEach(function(e){t.$register(e,m(Object.assign(r[e],{parent:t})))}),i&&Object.keys(i).forEach(function(e){t.$subscribe(e,i[e])}),t}var v=b;t.default=v}])});